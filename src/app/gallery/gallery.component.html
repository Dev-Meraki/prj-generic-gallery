<ng-container *ngIf="storage.images$ | async as myImages">
  <section class="d-flex justify-content-end">
    <app-user-menu></app-user-menu>
  </section>
  <ng-container *ngIf="$any(myImages).items.length > 0">
    <div class="container-fluid  masonry-center w-100">
      <div class="row w-100 m-0 p-0 justify-content-center">
        <ngx-masonry [options]="{ gutter: 20, fitWidth: true }">
          <div
            ngxMasonryItem
            class="masonry-item"
            *ngFor="let item of $any(myImages).items"
          >
            <!-- TODO: Optimise for all image formats -->
            <img
              *ngIf="
                item.indexOf('jpeg') > -1 ||
                item.indexOf('jpg') > -1 ||  item.indexOf('JPG') > -1 ||
                item.indexOf('png') > -1 ||
                item.indexOf('gif') > -1
              "
              [src]="item"
            />
            <div
              class="video-container"
              *ngIf="item.indexOf('MOV') > -1 || item.indexOf('.mp4') > -1"
            >
              <video class="mt-5" muted controls loop>
                <source [src]="item" type="video/mp4" />
                Your browser does not support HTML5 video.
              </video>
            </div>
          </div>
        </ngx-masonry>
      </div>
    </div>
  </ng-container>
</ng-container>
<!-- <p>Auth! <code *ngIf="auth.loggedIn$ | async as user">I am in {{$any(user).uid}}</code></p> -->
<!-- Scroll component -->
<div
  infiniteScroll
  [infiniteScrollDistance]="2"
  [infiniteScrollThrottle]="300"
  (scrolled)="onScroll()"
></div>
<app-loader></app-loader>
